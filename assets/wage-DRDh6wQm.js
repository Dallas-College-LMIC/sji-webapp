import{A as r}from"./shared-C0gk7HXj.js";import{B as s}from"./baseMapController-CQR30r7a.js";class a extends s{constructor(t){super(t,"tti_data"),this.layers=[{id:"pop",visibility:"visible",property:"all_jobs_zscore_cat",title:"Access to All Jobs",scoreProperty:"all_jobs_zscore"},{id:"job",visibility:"none",property:"living_wage_zscore_cat",title:"Access to Living Wage Jobs",scoreProperty:"living_wage_zscore"},{id:"lab",visibility:"none",property:"not_living_wage_zscore_cat",title:"Access to Not Living Wage Jobs",scoreProperty:"Not_Living_Wage_zscore"}],this.initialize()}async initialize(){await this.initializeMapWithEmptySource();try{const t=await this.apiService.getGeojsonData();console.log("Fetched data:",t),this.mapManager.addSource(this.sourceId,t),this.layers.forEach(i=>{this.mapManager.addLayer(i.id,this.sourceId,i.property,i.visibility),this.mapManager.addPopupEvents(i.id,i.title,i.scoreProperty)}),this.setupDropdownListener(),this.updateExportLink()}catch(t){throw console.error("Error loading data:",t),t}}setupDropdownListener(){const t=document.getElementById("tti");if(!t){console.warn('Dropdown element with id "tti" not found');return}const i=this.layers.map(e=>e.id);t.addEventListener("change",()=>{const e=t.value;i.forEach(o=>{this.mapManager.setLayerVisibility(o,o===e?"visible":"none")}),this.updateExportLink()})}getLayerIds(){return this.layers.map(t=>t.id)}}r.setupGlobalErrorHandlers();r.initialize("mainmap",a,"Wage Map");
//# sourceMappingURL=wage-DRDh6wQm.js.map
